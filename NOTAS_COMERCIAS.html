<!DOCTYPE html>
<html lang='pt-BR'><head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>
<title>NOTAS COMERCIAS</title>
<style>body{font-family:Inter,Arial;background:#f4f6f8;margin:0}.app{max-width:980px;margin:auto;padding:14px}header.appbar{background:#0b8457;color:#fff;padding:12px;border-radius:10px;display:flex;gap:10px;align-items:center}.title{font-size:17px;font-weight:700}.controls{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}.controls select,.controls input{padding:8px 10px;border-radius:10px;border:1px solid #ccc}.cardsWrap{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}.card{background:#fff;border-radius:12px;padding:14px;box-shadow:0 3px 10px rgba(0,0,0,.1);display:flex;flex-direction:column;gap:8px}.addr{color:#333;font-size:13px}.pill{background:#eef3f2;padding:6px 8px;border-radius:12px;font-size:12px}.fields{display:flex;gap:6px;flex-wrap:wrap}.btn{padding:6px 10px;border-radius:8px;font-weight:600;border:none;cursor:pointer}.btn.ghost{background:#fff;border:1px solid #0b8457;color:#0b8457}.btn.primary{background:#0b8457;color:#fff}.dateStatus.due{background:#e74c3c;color:#fff;padding:4px 8px;border-radius:8px}.dateStatus.next{background:#f2c94c;color:#000;padding:4px 8px;border-radius:8px}.modal{position:fixed;inset:0;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center}.modal-content{background:#fff;padding:20px;border-radius:10px;max-width:480px;width:90%}</style>
</head><body><div class='app'>
<header class='appbar'><svg width='30' height='30' viewBox='0 0 24 24'><path fill='#fff' d='M12 2L3 13h7l-1 9 10-12h-7l1-9z'/></svg><div><div class='title'>NOTAS COMERCIAS</div><div style='font-size:12px;opacity:.9'>Atualizado: 14/12/2025 20:20:08</div></div></header><div class='controls'><input id='qSearch' placeholder='Pesquisar...'><select id='filtroBase'><option value=''>Todas as bases</option></select><select id='filtroCidade'><option value=''>Todas as cidades</option></select><div id='contadorTotal'>Total: 0</div></div><table id='tblNotas' style='display:none'><tbody>
<tr data-base='BASE' data-poli='POLIGONAL' data-nota='Nota' data-tipo='Txt.code codif.' data-venc='Concl. desejada' data-cidade='Local' data-bairro='Bairro' data-rua='Rua' data-carga='Carga(Kw)' data-de='DE' data-para='PARA' data-cabocliente='RAMAL CLIENTE' data-cabocosern='RAMAL COSERN' data-disjuntor='DJTOR' data-medidor='MD200A'></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4801264262' data-tipo='Microgeração BT' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='BOM JESUS' data-rua='PO BOM JESUS 28' data-carga='' data-de='MONO' data-para='MONO' data-cabocliente='' data-cabocosern='16mm AL' data-disjuntor='63(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4501985894' data-tipo='Reativação BT' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='BOA PASSAGEM' data-rua='RUA DOUTOR ALADIM 110' data-carga='9' data-de='MONO' data-para='MONO' data-cabocliente='N/A' data-cabocosern='10mm AL' data-disjuntor='40(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4501993591' data-tipo='Reativação BT' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='BOA PASSAGEM' data-rua='RUA SAO PEDRO 4' data-carga='' data-de='MONO' data-para='MONO' data-cabocliente='' data-cabocosern='16mm AL' data-disjuntor='63(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4601520413' data-tipo='Alteração Contratual' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='BOA PASSAGEM' data-rua='RUA SAO SEBASTIAO 30' data-carga='15' data-de='MONO' data-para='MONO' data-cabocliente='N/A' data-cabocosern='16mm AL' data-disjuntor='63(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4501994073' data-tipo='Ligação Nova BT' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='CENTRO' data-rua='RUA PROFESSOR COUTINHO 1122' data-carga='19' data-de='TRIF' data-para='TRIF' data-cabocliente='' data-cabocosern='10mm AL' data-disjuntor='32(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4601518265' data-tipo='Modificação BT - Conexão GD Micro' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='LAJINHA' data-rua='RUA DO MERCADO 50' data-carga='15' data-de='MONO' data-para='MONO' data-cabocliente='N/A' data-cabocosern='16mm AL' data-disjuntor='63(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4601521570' data-tipo='Modificação BT - Conexão GD Micro' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='MAYNARD' data-rua='RUA JUAREZ TAVORA 332' data-carga='14,85' data-de='MONO' data-para='MONO' data-cabocliente='N/A' data-cabocosern='16mm AL' data-disjuntor='63(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4501992647' data-tipo='Reativação BT' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='MAYNARD' data-rua='RUA MOURA RABELO 312, AP-403' data-carga='9' data-de='MONO' data-para='MONO' data-cabocliente='N/A' data-cabocosern='10mm AL' data-disjuntor='40(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4601523044' data-tipo='Modificação BT - Conexão GD Micro' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='RECREIO' data-rua='RUA MANOEL ALVES SANTOS 61' data-carga='15' data-de='MONO' data-para='MONO' data-cabocliente='N/A' data-cabocosern='16mm AL' data-disjuntor='63(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4501986377' data-tipo='Reativação BT' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='SOLEDADE' data-rua='RUA ALEXANDRE PEREIRA GOMES 271' data-carga='9' data-de='MONO' data-para='MONO' data-cabocliente='N/A' data-cabocosern='10mm AL' data-disjuntor='40(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4601518148' data-tipo='Modificação BT - Conexão GD Micro' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='WALFREDO GURGEL' data-rua='RUA JOAO BERNARDO MEDEIROS 374' data-carga='6' data-de='MONO' data-para='MONO' data-cabocliente='N/A' data-cabocosern='10mm AL' data-disjuntor='40(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4601518726' data-tipo='Mudar Local de Medidor' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='WALFREDO GURGEL' data-rua='RUA JOAO BERNARDO MEDEIROS 388' data-carga='' data-de='MONO' data-para='MONO' data-cabocliente='' data-cabocosern='16mm AL' data-disjuntor='63(A)' data-medidor=''></tr>
<tr data-base='CAICO' data-poli='CAICO' data-nota='4601520159' data-tipo='Modificação BT - Conexão GD Micro' data-venc='17/12/2025' data-cidade='CAICO' data-bairro='ZONA RURAL' data-rua='SI SERIDOZINHO 2' data-carga='15' data-de='MONO' data-para='MONO' data-cabocliente='N/A' data-cabocosern='16mm AL' data-disjuntor='63(A)' data-medidor=''></tr>

</tbody></table>
<div id='cards' class='cardsWrap'></div><div id='empty' style='display:none;text-align:center;color:#777;padding:20px'>Nenhuma nota encontrada</div><script>
const mapaBaseCidade = {
'CAICO':['CAICO','IPUEIRA','SAO JOAO DO SABUGI','SERRA NEGRA DO NORTE','TIMBAUBA DOS BATISTAS'],
'CURRAIS NOVOS':['CURRAIS NOVOS','FLORANIA','SAO VICENTE','TENENTE LAURENTINO CRUZ'],
'EPS':['JARDIM DE PIRANHAS','SAO FERNANDO','JUCURUTU','SAO JOSE DO SERIDO','ACARI','CRUZETA','BODO','CERRO CORA','LAGOA NOVA'],
'PARELHAS':['EQUADOR','SANTANA DO SERIDO','JARDIM DO SERIDO','OURO BRANCO','CARNAUBA DOS DANTAS','PARELHAS'],
'SANTA CRUZ':['CAMPO REDONDO','LAJES PINTADA','CORONEL EZEQUIEL','JACANA','JAPI','SANTA CRUZ','SAO BENTO DO TRAIRI'],
};
function text(v){return v?String(v).trim():'';}
function parseDateFriendly(s){
  if(!s) return {cls:'',label:''};
  const p = s.split('/');
  if(p.length!==3) return {cls:'',label:s};
  const d = new Date(p[2], p[1]-1, p[0]);
  const t = new Date(); t.setHours(0,0,0,0);
  const diff = Math.round((d - t) / 86400000);
  if(diff===0) return {cls:'due', label:'Hoje - ' + s};
  if(diff===1) return {cls:'next', label:'Amanhã - ' + s};
  return {cls:'', label:s};
}
document.addEventListener('DOMContentLoaded', () => {
  const rows = [...document.querySelectorAll('#tblNotas tbody tr')];
  const cards = document.querySelector('#cards');
  const q = document.querySelector('#qSearch');
  const fBase = document.querySelector('#filtroBase');
  const fCid = document.querySelector('#filtroCidade');
  const cnt = document.querySelector('#contadorTotal');
  const data = rows.map(tr => ({...tr.dataset}));
  const bases = [...new Set(data.map(x => x.base))].filter(x => x).sort();
  bases.forEach(b => {
    const o = document.createElement('option');
    o.value = b;
    o.textContent = b;
    fBase.appendChild(o);
  });
  function loadCities(){
    fCid.innerHTML = '<option value="">Todas as cidades</option>';
    const b = fBase.value;
    if(b && mapaBaseCidade[b]){
      mapaBaseCidade[b].forEach(c => {
        const o = document.createElement('option');
        o.value = c;
        o.textContent = c;
        fCid.appendChild(o);
      });
    }
    render();
  }
  function render(){
    cards.innerHTML='';
    const txt = (q.value || '').toLowerCase();
    const selB = fBase.value;
    const selC = fCid.value;
    let shown = 0;
    data.forEach(it => {
      if(selB && it.base !== selB) return;
      if(selC && it.cidade !== selC) return;
      const hay = (it.nota + ' ' + it.tipo + ' ' + it.cidade + ' ' + it.bairro + ' ' + it.rua).toLowerCase();
      if(txt && hay.indexOf(txt) === -1) return;
      const d = parseDateFriendly(it.venc);
      const card = document.createElement('div');
      card.className = 'card';
      const top = document.createElement('div');
      top.innerHTML = '<b>' + it.nota + '</b><br><small>' + it.tipo + '</small>';
      const addr = document.createElement('div');
      addr.className = 'addr';
      addr.innerHTML = '<strong>' + it.cidade + '</strong> • ' + it.bairro + '<br>' + it.rua;
      const fields = document.createElement('div');
      fields.className = 'fields';
      const pc = document.createElement('div');
      pc.className = 'pill';
      pc.textContent = 'Carga: ' + it.carga;
      const dp = document.createElement('div');
      dp.className = 'pill';
      dp.textContent = it.de + ' > ' + it.para;
      fields.appendChild(pc);
      fields.appendChild(dp);
      const foot = document.createElement('div');
      foot.className = 'cardFooter';
      const dt = document.createElement('div');
      dt.className = 'dateStatus ' + d.cls;
      dt.textContent = d.label || it.venc || 'Sem data';
      const act = document.createElement('div');
      const b1 = document.createElement('button');
      b1.className='btn ghost';
      b1.textContent='Ver';
      b1.onclick=()=>showModal(it);
      const b2 = document.createElement('button');
      b2.className='btn primary';
      b2.textContent='Concluída';
      b2.onclick=()=>{ card.style.opacity='0.4'; setTimeout(()=>{ card.remove(); updateCount(); }, 180); }
      act.appendChild(b1);
      act.appendChild(b2);
      foot.appendChild(dt);
      foot.appendChild(act);
      card.appendChild(top);
      card.appendChild(addr);
      card.appendChild(fields);
      card.appendChild(foot);
      cards.appendChild(card);
      shown++;
    });
    document.querySelector('#empty').style.display = shown ? 'none' : 'block';
    updateCount();
  }
  function updateCount(){
    cnt.textContent = 'Total: ' + document.querySelectorAll('.card').length;
  }
  function showModal(it){
    const m=document.createElement('div'); m.className='modal';
    const c=document.createElement('div'); c.className='modal-content';
    const h=document.createElement('h3'); h.textContent='Nota '+it.nota; c.appendChild(h);
    const add=function(lbl,val){ if(!val) return; const p=document.createElement('p'); p.innerHTML='<b>'+lbl+':</b> '+val; c.appendChild(p); };
    add('Tipo de Serviço',it.tipo);
    add('Data de Vencimento',it.venc);
    add('Cidade',it.cidade);
    add('Bairro',it.bairro);
    add('Rua',it.rua);
    add('Carga',it.carga);
    add('De',it.de);
    add('Para',it.para);
    add('Cabo Cliente',it.cabocliente);
    add('Cabo Cosern',it.cabocosern);
    add('Disjuntor',it.disjuntor);
    add('Medidor',it.medidor);
    const bt=document.createElement('button');
    bt.className='btn primary';
    bt.textContent='Fechar';
    bt.style.marginTop='10px';
    bt.onclick=()=>document.body.removeChild(m);
    c.appendChild(bt);
    m.appendChild(c);
    document.body.appendChild(m);
  }
  q.oninput=render;
  fBase.onchange=loadCities;
  fCid.onchange=render;
  loadCities();
  render();
});
</script></div></body></html>
